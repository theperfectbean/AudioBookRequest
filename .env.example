# AudioBookRequest Environment Configuration
# Copy this file to .env.local and customize values for your environment

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================

# Debug mode - enables verbose logging and error traces
# Default: false
ABR_APP__DEBUG=false

# Enable OpenAPI documentation at /docs and /redoc
# Default: false
ABR_APP__OPENAPI_ENABLED=false

# Configuration directory path (where SQLite DB and cache files are stored)
# Default: /config
ABR_APP__CONFIG_DIR=/config

# HTTP port for the application
# Default: 8000
ABR_APP__PORT=8000

# Application version (typically set by CI/CD)
# Default: local
# ABR_APP__VERSION=local

# Logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
# Default: INFO
ABR_APP__LOG_LEVEL=INFO

# Base URL for the application (used for generating links)
# Leave empty for auto-detection
# Example: https://audiobooks.example.com
ABR_APP__BASE_URL=

# Default Audible region for searches (us, uk, de, fr, es, it, ca, au, in, jp)
# Default: us
ABR_APP__DEFAULT_REGION=us

# Force a specific login type (forms, oidc, basic, none)
# If set, users cannot change login type in UI
# Leave empty to allow login type selection
# Default: (empty)
ABR_APP__FORCE_LOGIN_TYPE=

# Initial root user credentials (only used on first startup)
# Leave empty to skip root user creation
ABR_APP__INIT_ROOT_USERNAME=
ABR_APP__INIT_ROOT_PASSWORD=

# ============================================================================
# METADATA ENRICHMENT SETTINGS
# ============================================================================

# Enable metadata enrichment for virtual books using Google Books API
# Default: true
ABR_APP__ENABLE_METADATA_ENRICHMENT=true

# Number of days to cache metadata enrichment results
# Default: 30
ABR_APP__METADATA_CACHE_EXPIRY_DAYS=30

# Google Books API key (optional - works without key but has rate limits)
# Get your API key at: https://console.cloud.google.com/apis/credentials
# Default: (empty)
ABR_APP__GOOGLE_BOOKS_API_KEY=

# ============================================================================
# AUTHOR RELEVANCE RANKING SETTINGS
# ============================================================================

# Enable author relevance ranking for search results (available_only mode)
# Default: true
ABR_APP__ENABLE_AUTHOR_RELEVANCE_RANKING=true

# Minimum score to show in 'Best Matches' section (0-100)
# Default: 70.0
ABR_APP__AUTHOR_MATCH_THRESHOLD=70.0

# Default state for strict author matching toggle
# Default: false
ABR_APP__AUTHOR_RELEVANCE_STRICT_MODE_DEFAULT=false

# Enable secondary scoring factors (title similarity, recency, popularity)
# Default: true
ABR_APP__ENABLE_SECONDARY_SCORING=true

# ============================================================================
# PERFORMANCE SETTINGS
# ============================================================================

# Maximum concurrent Audible API requests
# Default: 15, Recommended max: 30
ABR_APP__MAX_CONCURRENT_AUDIBLE_REQUESTS=15

# Cache TTL for fuzzy matching (seconds)
# Default: 3600 (1 hour)
ABR_APP__FUZZY_MATCH_CACHE_TTL=3600

# Cache TTL for author ranking (seconds)
# Default: 1800 (30 minutes)
ABR_APP__RANKING_CACHE_TTL=1800

# Cache TTL for virtual book upgrade attempts (seconds)
# Default: 86400 (24 hours)
ABR_APP__UPGRADE_ATTEMPT_CACHE_TTL=86400

# ============================================================================
# DATABASE SETTINGS
# ============================================================================

# SQLite database path (relative to config directory unless absolute path)
# Default: db.sqlite
ABR_DB__SQLITE_PATH=db.sqlite

# Use PostgreSQL instead of SQLite
# Default: false
ABR_DB__USE_POSTGRES=false

# PostgreSQL connection settings (only used if USE_POSTGRES=true)
# Default host: localhost
ABR_DB__POSTGRES_HOST=localhost

# Default port: 5432
ABR_DB__POSTGRES_PORT=5432

# Database name
# Default: audiobookrequest
ABR_DB__POSTGRES_DB=audiobookrequest

# Database user
# SECURITY: Change this in production!
# Default: abr
ABR_DB__POSTGRES_USER=abr

# Database password
# SECURITY: Use a strong password in production!
# Default: password
ABR_DB__POSTGRES_PASSWORD=password

# PostgreSQL SSL mode (disable, allow, prefer, require, verify-ca, verify-full)
# SECURITY: Use "require" or stricter in production!
# Default: prefer (allows fallback to unencrypted connections)
ABR_DB__POSTGRES_SSL_MODE=prefer

# ============================================================================
# DOCKER COMPOSE SETTINGS (for local development)
# ============================================================================

# PostgreSQL container credentials (used by docker-compose.yml psql service)
# These are separate from ABR_DB__POSTGRES_* settings above
# SECURITY: Change these for production deployments!
POSTGRES_USER=abr
POSTGRES_PASSWORD=password
POSTGRES_DB=audiobookrequest
